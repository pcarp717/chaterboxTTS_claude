<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatterboxTTS Desktop</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1><i class="fas fa-microphone"></i> ChatterboxTTS Desktop</h1>
            <div class="header-controls">
                <div class="system-status" id="systemStatus">
                    <span class="status-item"><i class="fas fa-desktop"></i> <span id="deviceStatus">Loading...</span></span>
                    <span class="status-item"><i class="fas fa-memory"></i> <span id="memoryStatus">Loading...</span></span>
                    <span class="status-model"><i class="fas fa-brain"></i> <span id="modelStatus">Not loaded</span></span>
                </div>
                <button id="darkModeToggle" class="btn btn-icon theme-toggle" title="Toggle Dark Mode">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Section: Input & Configuration -->
            <section class="section input-section">
                <div class="section-header">
                    <h2><i class="fas fa-edit"></i> Text Input & Configuration</h2>
                </div>
                
                <div class="input-config-container">
                    <div class="text-input-area">
                        <label for="textInput">Text to Generate (max 10,000 characters)</label>
                        <textarea 
                            id="textInput" 
                            placeholder="Enter the text you want to convert to speech..."
                            maxlength="10000"
                        ></textarea>
                        <div class="char-count">
                            <span id="charCount">0</span> / 10,000 characters
                        </div>
                    </div>
                    
                    <div class="configuration-panel">
                        <div class="voice-section">
                            <h3><i class="fas fa-user-circle"></i> Voice Selection</h3>
                            <select id="voiceSelect" class="voice-dropdown">
                                <option value="Default">Default Voice</option>
                            </select>
                            <div class="voice-info" id="voiceInfo">
                                <strong>Default</strong><br>
                                High-quality default voice
                            </div>
                            
                            <!-- Voice Management -->
                            <div class="voice-management">
                                <button id="manageVoicesBtn" class="btn btn-secondary">
                                    <i class="fas fa-cog"></i> Manage Voices
                                </button>
                            </div>
                        </div>
                        
                        <div class="voice-controls">
                            <h3><i class="fas fa-sliders-h"></i> Voice Settings</h3>
                            <div class="control-group">
                                <label for="exaggeration">Exaggeration (Emotion Level)</label>
                                <input type="range" id="exaggeration" min="0" max="1" step="0.1" value="0.5">
                                <span class="range-value" id="exaggerationValue">0.5</span>
                            </div>
                            <div class="control-group">
                                <label for="cfgWeight">CFG Weight (Generation Control)</label>
                                <input type="range" id="cfgWeight" min="0" max="1" step="0.1" value="0.5">
                                <span class="range-value" id="cfgWeightValue">0.5</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Middle Section: Generation Control -->
            <section class="section generation-section">
                <div class="section-header">
                    <h2><i class="fas fa-play-circle"></i> Generation Control</h2>
                </div>
                
                <div class="generation-controls">
                    <button id="generateBtn" class="btn btn-primary btn-large">
                        <i class="fas fa-microphone"></i> Generate Speech
                    </button>
                    
                    <div class="progress-container" id="progressContainer" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="progress-text" id="progressText">Generating...</div>
                    </div>
                    
                    <div class="status-message" id="statusMessage">
                        Ready to generate speech.
                    </div>
                </div>
            </section>

            <!-- Bottom Section: Playback & Output -->
            <section class="section playback-section">
                <div class="section-header">
                    <h2><i class="fas fa-volume-up"></i> Playback & Output</h2>
                </div>
                
                <div class="playback-container">
                    <div class="audio-player-container">
                        <audio id="audioPlayer" controls style="display: none;">
                            Your browser does not support the audio element.
                        </audio>
                        
                        <div class="waveform-placeholder" id="waveformPlaceholder">
                            <i class="fas fa-music"></i>
                            <p>Generate speech to see audio waveform</p>
                        </div>
                        
                        <div class="audio-controls" id="audioControls" style="display: none;">
                            <button id="playPauseBtn" class="btn btn-icon">
                                <i class="fas fa-play"></i>
                            </button>
                            <div class="timeline-container">
                                <input type="range" id="timeline" min="0" max="100" value="0" class="timeline">
                                <div class="time-display">
                                    <span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
                                </div>
                            </div>
                            <div class="playback-speed-container">
                                <i class="fas fa-tachometer-alt"></i>
                                <input type="range" id="playbackSpeedSlider" min="0.5" max="2.0" step="0.1" value="1.0" class="speed-slider">
                                <span id="speedValue">1.0x</span>
                            </div>
                            <div class="volume-container">
                                <i class="fas fa-volume-up"></i>
                                <input type="range" id="volumeSlider" min="0" max="100" value="100" class="volume-slider">
                            </div>
                        </div>
                    </div>
                    
                    <div class="export-section">
                        <h3><i class="fas fa-download"></i> Export Audio</h3>
                        <div class="export-controls">
                            <select id="exportFormat" class="export-format">
                                <option value="wav">High-quality WAV</option>
                            </select>
                            <button id="exportBtn" class="btn btn-secondary" disabled>
                                <i class="fas fa-download"></i> Export Audio
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Voice Management Modal -->
    <div id="voiceModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> Voice Management</h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="voice-upload">
                    <h3>Add New Voice</h3>
                    <p>Upload a 7-20 second clear audio sample (WAV or MP3)</p>
                    
                    <div class="upload-form">
                        <input type="text" id="voiceName" placeholder="Voice name (e.g., My Voice)" class="voice-name-input">
                        <div class="file-upload">
                            <input type="file" id="voiceFile" accept="audio/*" class="file-input">
                            <label for="voiceFile" class="file-label">
                                <i class="fas fa-upload"></i> Choose Audio File
                            </label>
                            <span class="file-name" id="fileName">No file selected</span>
                        </div>
                        <button id="addVoiceBtn" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Add Voice
                        </button>
                    </div>
                </div>
                
                <div class="voice-list">
                    <h3>Custom Voices</h3>
                    <div id="voiceListContainer">
                        <p class="no-voices">No custom voices added yet.</p>
                    </div>
                </div>
            </div>
            
            <div class="modal-status" id="modalStatus"></div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>